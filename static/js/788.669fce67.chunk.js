"use strict";(self.webpackChunkparaluni_react=self.webpackChunkparaluni_react||[]).push([[788],{92788:function(e,n,t){t.r(n),t.d(n,{default:function(){return O}});var a=t(74165),s=t(15861),r=t(29439),i=t(4519),c=t(77245),l=t(93433),u=t(447),o=t(74283),d=t(35689),f=t(45090),m=t(64236),v=t(69840),x=t(1413),h=t(16541),p=t(39231),Z=t(286),b=t(74985),j=t(45572),w=t(94447),g=t(29597),N=t(32048),k=t(74063),y=t(63252),C=t(2556);function S(e){var n=e.dataList,t=e.visibleModal,c=e.onCloseAfter,o=e.onSubmitAfter,f=e.modalmulitName,S=(0,v.$)().t,T=(0,i.useRef)(),V=(0,w.Z)().tokenList,A=(0,i.useState)(!1),O=(0,r.Z)(A,2),M=O[0],B=O[1],F=(0,i.useState)(null),I=(0,r.Z)(F,2),W=I[0],L=I[1],E=(0,i.useState)(!1),R=(0,r.Z)(E,2),P=R[0],G=R[1],Y=(0,i.useState)({}),$=(0,r.Z)(Y,2),q=$[0],X=$[1],_=(0,i.useState)(0),z=(0,r.Z)(_,2),D=z[0],H=z[1],J=(0,i.useState)(""),K=(0,r.Z)(J,2),Q=K[0],U=K[1],ee=(0,i.useState)(""),ne=(0,r.Z)(ee,2),te=ne[0],ae=ne[1],se=(0,i.useState)(""),re=(0,r.Z)(se,2),ie=re[0],ce=re[1],le=(0,i.useState)([]),ue=(0,r.Z)(le,2),oe=ue[0],de=ue[1],fe=(0,i.useState)([]),me=(0,r.Z)(fe,2),ve=me[0],xe=me[1],he=(0,i.useState)([]),pe=(0,r.Z)(he,2),Ze=pe[0],be=pe[1],je=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];U(""),ae(""),ce(""),de([]),e&&X(ve[0]||{}),e&&L(null)},we=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(){var n,t=arguments;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.length>0&&void 0!==t[0]?t[0]:"",e.next=3,(0,Z.cv)(q.label==(0,g.n)().defaultCurrencyName?"":q.address,b.Z[f],q.label);case 3:n=e.sent,H(n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ge=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(){var n,t,s,r,i,c;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Q||(0,j.mh)(Q)||"1"==W.value){e.next=3;break}return u.Z.show("\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u5730\u5740"),e.abrupt("return",!1);case 3:if(n="",t="","4"==W.value){e.next=38;break}if("0"!=W.value){e.next=17;break}if(q.label==(0,g.n)().defaultCurrencyName){e.next=14;break}return t=q.address,e.next=11,(0,k.ZO)(Q,(0,m.tr)(te,q.label).toFixed(),q.address);case 11:n=e.sent,e.next=15;break;case 14:n="0x";case 15:e.next=38;break;case 17:if("6"!=W.value&&"7"!=W.value){e.next=24;break}return t=b.Z[f],e.next=21,(0,k.uq)(Q,"6"==W.value?"addOwner":"removeOwner",f);case 21:n=e.sent,e.next=38;break;case 24:if("8"!=W.value){e.next=31;break}return t=b.Z[f],e.next=28,(0,k.n3)(te,f);case 28:n=e.sent,e.next=38;break;case 31:return t=q.address,s=oe.filter((function(e){return e})),r=q.paramType.map((function(e,n){var t=s[n];return e.indexOf("[]")>-1&&e.indexOf("bool")>-1?t=(0,l.Z)(t.split("-").filter((function(e){return e})).map((function(e){return"1"==e}))):e.indexOf("[]")>-1?t=(0,l.Z)(t.split("-").filter((function(e){return e}))):e.indexOf("bool")>-1&&(t="1"==t),{type:e,value:t}})),i="".concat(q.value,"(").concat(q.paramType.join(","),")"),e.next=37,(0,k.eJ)(t,i,r);case 37:n=e.sent;case 38:return c=[t,0,n],"4"==W.value?c=[Q,(0,m.tr)(te,"TRX").toFixed(0),ie]:"0"==W.value&&q.label==(0,g.n)().defaultCurrencyName&&(c=[Q,(0,m.tr)(te,"TRX").toFixed(0),n]),console.log(c,"\u5165"),e.next=43,(0,y.Z)({abi:"MultiSigWalletV2",address:b.Z[f],method:"submitTransaction",params:(0,l.Z)(c),type:"send"});case 43:e.sent&&(Ne(),o());case 45:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ne=function(){je(),c()};return(0,i.useEffect)((function(){"0"==(null===W||void 0===W?void 0:W.value)&&we(),je(!1)}),[W,q]),(0,i.useEffect)((function(){"0"==(null===W||void 0===W?void 0:W.value)?xe((0,l.Z)(Ze)):null!==W&&void 0!==W&&W.hasSecond?xe(null===W||void 0===W?void 0:W.secondLsit):(xe([]),X({}))}),[W]),(0,i.useEffect)((function(){ve[0]&&X(ve[0])}),[ve]),(0,i.useEffect)((function(){null!==V&&void 0!==V&&V.length&&Ze.length!=(null===V||void 0===V?void 0:V.length)&&be(V.map((function(e){return(0,x.Z)((0,x.Z)({},e),{},{value:e.symbol,label:e.symbol,address:e.symbol===(0,g.n)().defaultCurrencyName?"":e.address})})))}),[V]),(0,C.jsxs)("div",{className:"AddModal",ref:T,children:[(0,C.jsxs)(d.Z,{title:"\u6dfb\u52a0\u63d0\u6848",visible:t,width:"80%",mountContainer:function(){return T.current},footer:W?(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)("div",{className:"contentButton closeButton",onClick:Ne,children:S("common.cancel")}),(0,C.jsxs)("div",{className:"contentButton",onClick:ge,children:[S("common.submit"),"\u63d0\u8bae"]})]}):(0,C.jsx)("div",{className:"contentButton closeButton",onClick:Ne,children:S("common.cancel")}),children:[(0,C.jsxs)("div",{className:"mb-15 structuredFundCFAdminItem flex-row",onClick:function(){B(!0)},children:[(0,C.jsx)("div",{children:null!=W?W.label:"\u8bf7\u9009\u62e9"}),(0,C.jsx)("img",{src:p,className:"pullimg"})]}),W?(0,C.jsxs)(C.Fragment,{children:[(0,C.jsxs)("div",{children:[W.hasSecond?(0,C.jsxs)("div",{className:"mb-10 flex-row",onClick:function(){G(!0)},children:["\u9009\u62e9\u63d0\u6848\u5185\u5bb9\uff1a",null===q||void 0===q?void 0:q.label,(0,C.jsx)("img",{src:p,className:"pullimg"})]}):null,["0"].indexOf(W.value)>-1?(0,C.jsxs)("div",{className:"mb-10",children:["\u53ef\u63d0\u8bae\u6570\u91cf\uff1a",D]}):null,(0,N.get)(q,"paramType",[]).some((function(e){return e.indexOf("bool")>-1}))?(0,C.jsx)("div",{className:"mb-10",children:"\u8f93\u51651\u4ee3\u8868true\uff0c\u8f93\u5165\u5176\u4ed6\u4ee3\u8868false"}):null,(0,N.get)(q,"paramType",[]).some((function(e){return e.indexOf("[]")>-1}))?(0,C.jsx)("div",{className:"mb-10",children:'\u8f93\u5165\u6570\u7ec4\u7c7b\u578b\u7684\u6570\u636e\uff0c\u53ef\u4ee5\u7528"-"\u7b26\u53f7\u9694\u6539\u3002eg:1-2-3'}):null,["0","4","6","7"].indexOf(W.value)>-1?(0,C.jsxs)("div",{className:"contentInputView",children:[(0,C.jsx)("input",{placeholder:S("\u8bf7\u8f93\u5165\u5730\u5740"),value:Q,onChange:function(e){U(e.target.value)},className:"contentInput"}),Q?(0,C.jsx)("div",{style:{color:"#ccc"},onClick:function(){U("")},children:"\u6e05\u9664"}):null]}):null,["0","4","5","8"].indexOf(W.value)>-1?(0,C.jsxs)("div",{className:"contentInputView",children:[(0,C.jsx)("input",{placeholder:S("\u8bf7\u8f93\u5165\u6570\u91cf"),value:te,onChange:function(e){ae(e.target.value)},className:"contentInput"}),te?(0,C.jsx)("div",{style:{color:"#ccc"},onClick:function(){ae("")},children:"\u6e05\u9664"}):null]}):null]}),"4"!=W.value?null:(0,C.jsxs)("div",{className:"contentInputView",children:[(0,C.jsx)("input",{placeholder:S("\u8bf7\u8f93\u5165\u81ea\u5b9a\u4e49\u5185\u5bb9"),value:ie,onChange:function(e){ce(e.target.value)},className:"contentInput"}),ie?(0,C.jsx)("div",{style:{color:"#ccc"},onClick:function(){ce("")},children:"\u6e05\u9664"}):null]}),(0,N.get)(q,"paramType",[]).map((function(e,n){return(0,C.jsxs)("div",{className:"contentInputView",children:[(0,C.jsx)("input",{placeholder:S("\u8bf7\u8f93\u5165".concat(e)),value:oe[n]||"",onChange:function(e){oe[n]=e.target.value,de((0,l.Z)(oe))},className:"contentInput"}),oe[n]?(0,C.jsx)("div",{style:{color:"#ccc"},onClick:function(){oe[n]="",de((0,l.Z)(oe))},children:"\u6e05\u9664"}):null]},n)}))]}):null]}),(0,C.jsx)(h.Z,{visible:M,value:null===W||void 0===W?void 0:W.value,title:S("common.choose"),okText:S("common.submit"),cancelText:S("common.cancel"),dataSource:n,onOk:function(e){L(e[0]),B(!1)},onCancel:function(){B(!1)}}),(0,C.jsx)(h.Z,{visible:P,value:null===q||void 0===q?void 0:q.value,title:S("common.choose"),okText:S("common.submit"),cancelText:S("common.cancel"),dataSource:ve,onOk:function(e){X(e[0]),G(!1)},onCancel:function(){G(!1)}})]})}var T=t(16595);function V(e){var n=e.userinfo,t=e.mulitName,c=e.hasRoule,x=(0,v.$)().t,h=(0,i.useRef)(),p=(0,i.useState)([]),Z=(0,r.Z)(p,2),w=Z[0],g=Z[1],N=(0,i.useState)(!1),k=(0,r.Z)(N,2),V=k[0],A=k[1],O=(0,i.useState)(!1),M=(0,r.Z)(O,2),B=M[0],F=M[1],I=(0,i.useState)({}),W=(0,r.Z)(I,2),L=W[0],E=W[1],R=(0,i.useState)("wait"),P=(0,r.Z)(R,2),G=P[0],Y=P[1],$=(0,i.useState)([]),q=(0,r.Z)($,2),X=(q[0],q[1],(0,i.useState)(!1)),_=(0,r.Z)(X,2),z=(_[0],_[1],function(){var e=(0,s.Z)((0,a.Z)().mark((function e(n){var t,s,r,i,c;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,y.Z)({abi:"MultiSigWalletV2",address:b.Z[n],method:"transactionCount",params:[],type:"call"});case 2:return t=e.sent,s=new Array(parseInt(t)).fill(1),e.next=6,(0,T.Z)(s.map((function(e,t){return{abi:"MultiSigWalletV2",address:b.Z[n],method:"isConfirmed",params:[t]}})));case 6:return r=e.sent,e.next=9,(0,T.Z)(s.map((function(e,t){return{abi:"MultiSigWalletV2",address:b.Z[n],method:"transactions",params:[t]}})));case 9:return i=e.sent,Array.isArray(r)||(r=[r]),c=i.map((function(e,n){return{typeText:n,data:e.data||e[2],itemstatus:e.executed||e[3]?"success":"wait",startAddree:(0,j.Y9)(e.destination||e[0]),id:n,isConfirmed:r[n]}})),e.abrupt("return",c);case 13:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()),D=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(){var n,s;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z(t);case 2:n=e.sent,s=(0,l.Z)(n),g(s);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),H=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(s){var r,i;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,y.Z)({abi:"MultiSigWalletV2",address:b.Z[t],method:"getConfirmations",params:[s.id],type:"call"});case 2:return r=e.sent,e.next=5,(0,y.Z)({abi:"MultiSigWalletV2",address:b.Z[t],method:"required",params:[],type:"call"});case 5:i=e.sent,r=Array.isArray(r)?r.map(j.Y9):[(0,j.Y9)(r)],F(!0),E({typeText:"\u63d0\u6848\u7f16\u53f7\uff1a".concat(s.id),data:s.data,id:s.id,voteLength:i,agreeNum:r.length,canGoPro:r.length>=i,isfavo:r.indexOf(n.address)>-1});case 9:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),J=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(n){var s;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c){e.next=3;break}return u.Z.show("\u60a8\u4e0d\u662f\u8be5\u591a\u7b7e\u7684\u8bae\u5458\uff0c\u65e0\u6cd5\u521b\u5efa\u63d0\u6848"),e.abrupt("return",!1);case 3:if(s=null,!n){e.next=10;break}return e.next=7,(0,y.Z)({abi:"MultiSigWalletV2",address:b.Z[t],method:"revokeConfirmation",params:[L.id],type:"send"});case 7:s=e.sent,e.next=13;break;case 10:return e.next=12,(0,y.Z)({abi:"MultiSigWalletV2",address:b.Z[t],method:"confirmTransaction",params:[L.id],type:"send"});case 12:s=e.sent;case 13:s&&(u.Z.show("\u6267\u884c\u6210\u529f"),H(L));case 14:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),K=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(n){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,y.Z)({abi:"MultiSigWalletV2",address:b.Z[t],method:"executeTransaction",params:[n],type:"send",sendValue:{feeLimit:9e9}});case 2:e.sent&&(u.Z.show("\u6267\u884c\u6210\u529f"),F(!1),E({}),D());case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,i.useEffect)((function(){D()}),[null===n||void 0===n?void 0:n.address]),(0,C.jsxs)("div",{className:"MultiSignature",ref:h,children:[(0,C.jsx)(f.Z,{children:(0,C.jsx)("div",{className:"contentButton",onClick:function(){c?A(!0):u.Z.show("\u60a8\u4e0d\u662f\u8be5\u591a\u7b7e\u7684\u8bae\u5458\uff0c\u65e0\u6cd5\u521b\u5efa\u63d0\u6848")},children:x("\u521b\u5efa\u63d0\u6848")})}),(0,C.jsx)(f.Z,{children:(0,C.jsxs)("div",{className:"flex-row-center fl-jc-between",children:[(0,C.jsx)("div",{className:"item-view",children:"\u663e\u793a\u672a\u6267\u884c\u63d0\u6848"}),(0,C.jsxs)(o.Z.Group,{type:"button",defaultValue:G,onChange:function(e){Y(e)},children:[(0,C.jsx)(o.Z,{value:"all",children:"\u5168\u90e8"}),(0,C.jsx)(o.Z,{value:"wait",children:"\u672a\u6267\u884c"}),(0,C.jsx)(o.Z,{value:"success",children:"\u5df2\u6267\u884c"})]})]})}),w.map((function(e,n){return e.itemstatus==G||"all"==G?(0,C.jsx)(f.Z,{children:(0,C.jsx)("div",{className:"flex-row-center fl-jc-between",children:(0,C.jsxs)("div",{className:"item-view",children:[(0,C.jsxs)("div",{className:"flex-row-center fl-jc-between mb-10",children:[(0,C.jsx)("div",{children:x("\u63d0\u6848\u7f16\u53f7")}),(0,C.jsx)("div",{children:e.typeText})]}),(0,C.jsxs)("div",{className:"item-view-contents flex-row-center fl-jc-between",children:[(0,C.jsx)("div",{children:x("\u76ee\u6807\u5730\u5740")}),(0,C.jsx)("div",{children:(0,m.z7)(e.startAddree)})]}),(0,C.jsxs)("div",{className:"item-view-contents flex-row-center fl-jc-between",children:[(0,C.jsx)("div",{children:x("\u72b6\u6001")}),"wait"==e.itemstatus?(0,C.jsxs)(C.Fragment,{children:[e.isConfirmed?(0,C.jsx)("div",{className:"ml-auto mr-10 contentButton",onClick:function(){K(e.id)},children:"\u6267\u884c\u63d0\u6848"}):null,(0,C.jsx)("div",{className:"contentButton",onClick:function(){H(e)},children:x("\u6295\u7968")})]}):"success"==e.itemstatus?(0,C.jsx)("div",{className:"font-color-green",children:"\u5df2\u6267\u884c"}):(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)("div",{className:"ml-auto mr-10 font-color-red",children:"\u6267\u884c\u5931\u8d25"}),(0,C.jsx)("div",{className:"contentButton",onClick:function(){againProposal("edit",e,n)},children:x("\u91cd\u65b0\u6267\u884c")})]})]})]})})},e.id):null})),(0,C.jsx)(S,{modalmulitName:t,visibleModal:V,dataList:[{value:"4",label:"\u81ea\u5b9a\u4e49"},{value:"6",label:"\u6dfb\u52a0\u8bae\u5458"},{value:"7",label:"\u79fb\u9664\u8bae\u5458"},{value:"8",label:"\u6539\u53d8\u591a\u7b7e\u53ef\u6267\u884c\u7968\u6570"}],onCloseAfter:function(){A(!1)},onSubmitAfter:function(){D()}}),(0,C.jsxs)(d.Z,{visible:B,footer:null,mountContainer:function(){return h.current},children:[(0,C.jsx)("div",{className:"mb-10 structuredFundCFAdminItem",children:L.typeText}),(0,C.jsx)("div",{className:"mb-10",style:{"word-break":"break-all"},children:L.data}),L.isfavo&&L.canGoPro||!L.canGoPro?(0,C.jsx)("div",{className:"contentButton mb-10",onClick:function(){J(L.isfavo)},children:L.isfavo?"\u64a4\u56de\u6295\u7968(".concat(L.agreeNum,"/").concat(L.voteLength,")"):"\u8d5e\u6210(".concat(L.agreeNum,"/").concat(L.voteLength,")")}):null,(0,C.jsx)("div",{className:"contentButton",onClick:function(){F(!1),E({})},children:"\u5173\u95ed"})]})]})}var A=t(12212);t(31057);function O(){var e=(0,A.Z)(),n=e.setAddress,t=e.user,l=(0,i.useState)([]),u=(0,r.Z)(l,2),o=u[0],d=u[1],f=(0,i.useState)("NO Content"),m=(0,r.Z)(f,2),x=m[0],h=(m[1],(0,i.useState)(!0)),p=(0,r.Z)(h,2),Z=p[0],j=p[1],w=(0,v.$)().t,g=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(){var n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,k.ni)(b.Z.MultiSigWalletV2,t.address);case 2:n=e.sent,j(n||!1);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,i.useEffect)((function(){var e=[];e.push({title:w("\u591a\u7b7e\u7ba1\u7406"),node:(0,C.jsx)(V,{userinfo:t,mulitName:"MultiSigWalletV2",hasRoule:Z})}),d([].concat(e))}),[Z,t.address]),(0,i.useEffect)((function(){t.address||n(),t.address&&g(),document.title="V42-Admin"}),[t.address]),(0,C.jsx)("div",{className:"DHCProjectAdmin",children:o.length?(0,C.jsx)(c.Z,{tabs:o}):(0,C.jsx)("div",{className:"tipstext",children:x})})}}}]);